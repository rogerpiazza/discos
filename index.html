<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>VinylVault — Coleção</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --cream: #f5efe0;
    --dark: #1a1208;
    --brown: #3d2b0f;
    --amber: #c8870a;
    --amber-light: #f0a830;
    --groove: #2a1e0a;
    --tan: #d4b483;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    background: var(--dark);
    color: var(--cream);
    font-family: 'Playfair Display', serif;
    min-height: 100vh;
    background-image:
      radial-gradient(ellipse at 20% 50%, #2d1a05 0%, transparent 60%),
      radial-gradient(ellipse at 80% 20%, #1f1505 0%, transparent 50%),
      repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(255,255,255,0.01) 2px, rgba(255,255,255,0.01) 4px);
  }

  .header {
    background: var(--groove);
    border-bottom: 3px solid var(--amber);
    padding: 14px 20px;
    display: flex; align-items: center; justify-content: space-between;
    position: sticky; top: 0; z-index: 100;
    box-shadow: 0 4px 20px rgba(0,0,0,0.6);
  }
  .header-logo {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 26px; letter-spacing: 3px; color: var(--amber-light); line-height: 1;
  }
  .header-logo span {
    display: block; font-size: 9px; font-family: 'IBM Plex Mono', monospace;
    color: var(--tan); letter-spacing: 3px; margin-top: 2px;
  }
  .vinyl-sm {
    width: 38px; height: 38px; border-radius: 50%;
    background: radial-gradient(circle, #111 30%, #222 31%, #222 40%, #111 41%, #111 50%, #2a2a2a 51%, #1a1a1a 70%, #111 71%);
    border: 2px solid var(--amber);
    animation: spin 8s linear infinite;
    box-shadow: 0 0 12px rgba(200,135,10,0.3);
  }
  @keyframes spin { to { transform: rotate(360deg); } }

  .main { padding: 20px 16px 40px; max-width: 480px; margin: 0 auto; }

  .hero { text-align: center; padding: 28px 0 10px; }
  .hero h1 { font-family: 'Bebas Neue', sans-serif; font-size: 40px; letter-spacing: 5px; color: var(--amber-light); line-height: 1; }
  .hero p { font-family: 'IBM Plex Mono', monospace; font-size: 11px; color: var(--tan); margin-top: 6px; letter-spacing: 2px; }

  .groove-line {
    height: 3px;
    background: repeating-linear-gradient(90deg, var(--amber) 0, var(--amber) 3px, transparent 3px, transparent 8px);
    opacity: 0.3; margin: 18px 0; border-radius: 2px;
  }

  .stats { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 22px; }
  .stat-card {
    background: var(--groove); border: 1px solid rgba(200,135,10,0.25);
    border-radius: 4px; padding: 12px 8px; text-align: center;
  }
  .stat-num { font-family: 'Bebas Neue', sans-serif; font-size: 28px; color: var(--amber-light); line-height: 1; }
  .stat-label { font-family: 'IBM Plex Mono', monospace; font-size: 9px; color: var(--tan); text-transform: uppercase; letter-spacing: 1px; margin-top: 3px; }

  .section-title {
    font-family: 'Bebas Neue', sans-serif; font-size: 12px; letter-spacing: 4px; color: var(--amber);
    text-transform: uppercase; margin-bottom: 12px; display: flex; align-items: center; gap: 8px;
  }
  .section-title::after { content: ''; flex: 1; height: 1px; background: rgba(200,135,10,0.3); }

  .search-input {
    width: 100%; background: var(--groove);
    border: 1px solid rgba(200,135,10,0.4); color: var(--cream);
    font-family: 'Playfair Display', serif; font-size: 15px;
    padding: 10px 14px; border-radius: 3px; outline: none; margin-bottom: 10px;
  }
  .search-input::placeholder { color: rgba(212,180,131,0.4); font-style: italic; }
  .search-input:focus { border-color: var(--amber); }

  .filter-bar { display: flex; gap: 8px; margin-bottom: 16px; flex-wrap: wrap; }
  .filter-select {
    background: var(--groove); border: 1px solid rgba(200,135,10,0.4);
    color: var(--cream); font-family: 'IBM Plex Mono', monospace;
    font-size: 11px; padding: 8px 10px; border-radius: 3px;
    flex: 1; min-width: 100px; cursor: pointer; outline: none;
  }
  .filter-select option { background: var(--groove); }

  .lp-grid { display: flex; flex-direction: column; gap: 10px; }
  .lp-card {
    background: var(--groove); border: 1px solid rgba(200,135,10,0.2);
    border-radius: 6px; display: flex; overflow: hidden;
    cursor: pointer; transition: border-color 0.2s, transform 0.1s;
  }
  .lp-card:active { border-color: var(--amber); transform: scale(0.99); }
  .lp-thumb { width: 96px; min-height: 96px; flex-shrink: 0; background: #111; position: relative; overflow: hidden; }
  .lp-thumb img { width: 100%; height: 100%; object-fit: cover; }
  .lp-thumb-placeholder {
    width: 100%; height: 100%; min-height: 96px;
    display: flex; align-items: center; justify-content: center;
    background: radial-gradient(circle, #1a1a1a 30%, #222 31%, #222 40%, #1a1a1a 41%);
  }
  .lp-info { padding: 12px 14px; flex: 1; display: flex; flex-direction: column; justify-content: space-between; }
  .lp-title { font-size: 16px; font-weight: 700; color: var(--cream); line-height: 1.2; }
  .lp-artist { font-size: 12px; color: var(--tan); font-style: italic; margin-top: 2px; }
  .lp-meta { display: flex; align-items: center; gap: 6px; margin-top: 8px; flex-wrap: wrap; }
  .badge { font-family: 'IBM Plex Mono', monospace; font-size: 10px; padding: 3px 7px; border-radius: 2px; text-transform: uppercase; letter-spacing: 1px; }
  .badge-genre { background: rgba(200,135,10,0.15); color: var(--amber); border: 1px solid rgba(200,135,10,0.3); }
  .badge-state-otimo { background: rgba(20,120,50,0.2); color: #6ecf8a; border: 1px solid rgba(20,120,50,0.4); }
  .badge-state-bom { background: rgba(50,100,180,0.2); color: #7bb3f0; border: 1px solid rgba(50,100,180,0.4); }
  .badge-state-regular { background: rgba(180,120,10,0.2); color: #e0bc60; border: 1px solid rgba(180,120,10,0.4); }
  .badge-state-ruim { background: rgba(180,30,10,0.2); color: #e08060; border: 1px solid rgba(180,30,10,0.4); }
  .lp-price { font-family: 'Bebas Neue', sans-serif; font-size: 20px; color: var(--amber-light); }

  .empty-state { text-align: center; padding: 60px 20px; color: var(--tan); }
  .empty-state svg { width: 70px; height: 70px; opacity: 0.3; margin-bottom: 14px; }
  .empty-state h3 { font-family: 'Bebas Neue', sans-serif; font-size: 24px; letter-spacing: 2px; color: var(--amber); margin-bottom: 8px; }
  .empty-state p { font-size: 14px; font-style: italic; }

  /* DETAIL MODAL */
  .modal-overlay {
    display: none; position: fixed; inset: 0;
    background: rgba(10,8,4,0.92); z-index: 200;
    overflow-y: auto; padding: 20px 16px 40px;
  }
  .modal-overlay.open { display: flex; flex-direction: column; }
  .modal-box {
    background: var(--groove); border: 2px solid var(--amber);
    border-radius: 6px; padding: 24px 20px;
    width: 100%; max-width: 480px; margin: auto;
    box-shadow: 0 0 40px rgba(200,135,10,0.2);
  }
  .modal-title {
    font-family: 'Bebas Neue', sans-serif; font-size: 26px;
    letter-spacing: 3px; color: var(--amber-light);
    margin-bottom: 18px; display: flex; align-items: center; gap: 10px;
  }
  .detail-photo { width: 100%; height: 240px; background: #111; border-radius: 4px; overflow: hidden; margin-bottom: 18px; }
  .detail-photo img { width: 100%; height: 100%; object-fit: cover; }
  .detail-title { font-size: 24px; font-weight: 700; color: var(--cream); margin-bottom: 4px; }
  .detail-row {
    display: flex; justify-content: space-between; align-items: center;
    padding: 11px 0; border-bottom: 1px solid rgba(200,135,10,0.15);
    font-family: 'IBM Plex Mono', monospace; font-size: 13px;
  }
  .detail-row .label { color: var(--tan); text-transform: uppercase; letter-spacing: 1px; font-size: 10px; }
  .btn-close {
    width: 100%; margin-top: 20px; padding: 14px;
    background: transparent; color: var(--tan);
    font-family: 'IBM Plex Mono', monospace; font-size: 13px;
    border: 1px solid rgba(200,135,10,0.3); border-radius: 3px; cursor: pointer; letter-spacing: 1px;
  }

  .result-count {
    font-family: 'IBM Plex Mono', monospace; font-size: 11px;
    color: var(--tan); margin-bottom: 12px; letter-spacing: 1px;
  }
</style>
</head>
<body>

<header class="header">
  <div class="header-logo">
    VinylVault
    <span>// Coleção Pública</span>
  </div>
  <div class="vinyl-sm"></div>
</header>

<main class="main">
  <div class="hero">
    <h1>Discos em Vinil</h1>
    <p>// acervo do colecionador</p>
  </div>

  <div class="groove-line"></div>

  <div class="stats">
    <div class="stat-card">
      <div class="stat-num" id="stat-total">0</div>
      <div class="stat-label">Discos</div>
    </div>
    <div class="stat-card">
      <div class="stat-num" id="stat-genres">0</div>
      <div class="stat-label">Gêneros</div>
    </div>
    <div class="stat-card">
      <div class="stat-num" id="stat-value">R$0</div>
      <div class="stat-label">Valor Total</div>
    </div>
  </div>

  <div class="section-title">Explorar Coleção</div>

  <input type="text" class="search-input" placeholder="Buscar por nome ou artista..." id="searchInput" oninput="renderCollection()">

  <div class="filter-bar">
    <select class="filter-select" id="filterGenre" onchange="renderCollection()">
      <option value="">Todos os Gêneros</option>
      <option>Rock</option><option>MPB</option><option>Samba</option>
      <option>Jazz</option><option>Blues</option><option>Soul/Funk</option>
      <option>Pop</option><option>Clássico</option><option>Eletrônico</option>
      <option>Reggae</option><option>Outro</option>
    </select>
    <select class="filter-select" id="filterState" onchange="renderCollection()">
      <option value="">Todos os Estados</option>
      <option>Ótimo</option><option>Bom</option><option>Regular</option><option>Ruim</option>
    </select>
    <select class="filter-select" id="filterSort" onchange="renderCollection()">
      <option value="date">Mais recente</option>
      <option value="name">A–Z</option>
      <option value="price-asc">Menor valor</option>
      <option value="price-desc">Maior valor</option>
    </select>
  </div>

  <div class="result-count" id="resultCount"></div>
  <div class="lp-grid" id="lpGrid"></div>
  <div id="emptyState" class="empty-state" style="display:none">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="3"/></svg>
    <h3>Coleção Vazia</h3>
    <p>Nenhum disco encontrado.</p>
  </div>
</main>

<!-- DETAIL MODAL -->
<div class="modal-overlay" id="detailModal">
  <div class="modal-box">
    <div class="modal-title">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="3"/></svg>
      Detalhes
    </div>
    <div class="detail-photo" id="detailPhoto"></div>
    <div class="detail-title" id="detailName"></div>
    <div id="detailArtist" style="color:var(--tan);font-style:italic;margin-bottom:14px;font-size:14px"></div>
    <div class="detail-row"><span class="label">Gênero</span><span id="detailGenre"></span></div>
    <div class="detail-row"><span class="label">Estado</span><span id="detailState"></span></div>
    <div class="detail-row" style="border:none"><span class="label">Valor</span><span id="detailValue" style="font-family:'Bebas Neue';font-size:20px;color:var(--amber-light)"></span></div>
    <button class="btn-close" onclick="closeDetail()">Fechar</button>
  </div>
</div>

<script>
  let collection = JSON.parse(localStorage.getItem('vinyl_collection') || '[]');

  function updateStats() {
    document.getElementById('stat-total').textContent = collection.length;
    const genres = new Set(collection.map(l => l.genre).filter(Boolean));
    document.getElementById('stat-genres').textContent = genres.size;
    const total = collection.reduce((s, l) => s + (parseFloat(l.value) || 0), 0);
    document.getElementById('stat-value').textContent = total >= 1000
      ? 'R$' + (total/1000).toFixed(1) + 'k'
      : 'R$' + total.toFixed(0);
  }

  function stateClass(s) {
    if (s === 'Ótimo') return 'badge-state-otimo';
    if (s === 'Bom') return 'badge-state-bom';
    if (s === 'Regular') return 'badge-state-regular';
    return 'badge-state-ruim';
  }

  function renderCollection() {
    // Reload from storage in case admin added something
    collection = JSON.parse(localStorage.getItem('vinyl_collection') || '[]');
    updateStats();

    const search = document.getElementById('searchInput').value.toLowerCase();
    const genre = document.getElementById('filterGenre').value;
    const state = document.getElementById('filterState').value;
    const sort = document.getElementById('filterSort').value;

    let list = collection.filter(lp => {
      const matchName = lp.name.toLowerCase().includes(search) || (lp.artist||'').toLowerCase().includes(search);
      return matchName && (!genre || lp.genre === genre) && (!state || lp.state === state);
    });

    if (sort === 'name') list.sort((a,b) => a.name.localeCompare(b.name));
    else if (sort === 'price-asc') list.sort((a,b) => a.value - b.value);
    else if (sort === 'price-desc') list.sort((a,b) => b.value - a.value);

    const grid = document.getElementById('lpGrid');
    const empty = document.getElementById('emptyState');
    const count = document.getElementById('resultCount');

    if (!list.length) {
      grid.innerHTML = ''; empty.style.display = 'block';
      count.textContent = '';
      return;
    }
    empty.style.display = 'none';
    count.textContent = list.length + ' disco' + (list.length !== 1 ? 's' : '') + ' encontrado' + (list.length !== 1 ? 's' : '');

    grid.innerHTML = list.map(lp => `
      <div class="lp-card" onclick="openDetail(${lp.id})">
        <div class="lp-thumb">
          ${lp.photo ? `<img src="${lp.photo}" alt="${lp.name}">` : `<div class="lp-thumb-placeholder"><svg width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="rgba(200,135,10,0.25)" stroke-width="1"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="3"/></svg></div>`}
        </div>
        <div class="lp-info">
          <div>
            <div class="lp-title">${lp.name}</div>
            ${lp.artist ? `<div class="lp-artist">${lp.artist}</div>` : ''}
          </div>
          <div class="lp-meta">
            <span class="badge badge-genre">${lp.genre}</span>
            <span class="badge ${stateClass(lp.state)}">${lp.state}</span>
            ${lp.value ? `<span class="lp-price">R$ ${lp.value.toFixed(2)}</span>` : ''}
          </div>
        </div>
      </div>
    `).join('');
  }

  function openDetail(id) {
    const lp = collection.find(l => l.id === id);
    if (!lp) return;
    document.getElementById('detailPhoto').innerHTML = lp.photo
      ? `<img src="${lp.photo}" alt="${lp.name}">`
      : `<div style="width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:radial-gradient(circle,#1a1a1a 30%,#222 31%,#222 40%,#1a1a1a 41%)"><svg width="70" height="70" viewBox="0 0 24 24" fill="none" stroke="rgba(200,135,10,0.2)" stroke-width="1"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="3"/></svg></div>`;
    document.getElementById('detailName').textContent = lp.name;
    document.getElementById('detailArtist').textContent = lp.artist || '';
    document.getElementById('detailGenre').textContent = lp.genre;
    document.getElementById('detailState').textContent = lp.state;
    document.getElementById('detailValue').textContent = lp.value ? `R$ ${lp.value.toFixed(2)}` : '—';
    document.getElementById('detailModal').classList.add('open');
  }
  function closeDetail() { document.getElementById('detailModal').classList.remove('open'); }

  renderCollection();
</script>
</body>
</html>
